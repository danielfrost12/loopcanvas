<!-- Onboarding Tips Overlay - auto-generated by onboarding_optimizer -->
<div class="onboarding-overlay" id="onboarding-tips">
  <div class="onboarding-tip" data-stage="upload_stage" data-position="bottom">
    <p class="tip-message">Drop any audio file â€” WAV, MP3, FLAC, or M4A</p>
    <button class="tip-dismiss" aria-label="Dismiss tip">Got it</button>
  </div>
  <div class="onboarding-tip" data-stage="director_stage" data-position="top">
    <p class="tip-message">Each director interprets your music differently. Try a few!</p>
    <button class="tip-dismiss" aria-label="Dismiss tip">Got it</button>
  </div>
  <div class="onboarding-tip" data-stage="export_stage" data-position="bottom">
    <p class="tip-message">Your first 3 exports are free!</p>
    <button class="tip-dismiss" aria-label="Dismiss tip">Got it</button>
  </div>
  <div class="progress-celebration" data-stage="generate_complete">
    <p class="celebration-message">Your canvas is ready! Quality score: {score}/10</p>
    <button class="share-prompt-btn">Share your canvas</button>
  </div>
  <div class="quick-suggestions" data-stage="export_stage">
    <p class="suggestions-label">Try something different:</p>
    <button class="suggestion-chip">Make it feel like 3am</button>
    <button class="suggestion-chip">Try a different director</button>
    <button class="suggestion-chip">Add more grain</button>
    <button class="suggestion-chip">Make it warmer</button>
  </div>
</div>

<style>
  .onboarding-overlay { position: fixed; inset: 0; pointer-events: none; z-index: 9000; }
  .onboarding-tip { position: absolute; pointer-events: auto; background: rgba(18,18,24,0.85); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.08); border-radius: 14px; padding: 14px 18px; color: #e0e0e6; font-family: 'Inter', system-ui, sans-serif; font-size: 14px; max-width: 280px; opacity: 0; transform: translateY(6px); transition: opacity 0.35s ease, transform 0.35s ease; box-shadow: 0 8px 32px rgba(0,0,0,0.4); }
  .onboarding-tip.visible { opacity: 1; transform: translateY(0); }
  .onboarding-tip.pulse { animation: tip-pulse 1.8s ease-in-out 1; }
  @keyframes tip-pulse { 0%,100% { box-shadow: 0 8px 32px rgba(0,0,0,0.4); } 50% { box-shadow: 0 8px 32px rgba(99,102,241,0.35); } }
  .tip-message { margin: 0 0 10px 0; line-height: 1.45; }
  .tip-dismiss { background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: rgba(255,255,255,0.7); cursor: pointer; font-size: 12px; padding: 5px 14px; transition: background 0.2s; }
  .tip-dismiss:hover { background: rgba(255,255,255,0.12); }
  .progress-celebration { position: fixed; bottom: 32px; left: 50%; transform: translateX(-50%); pointer-events: auto; background: rgba(18,18,24,0.9); backdrop-filter: blur(24px); -webkit-backdrop-filter: blur(24px); border: 1px solid rgba(99,102,241,0.25); border-radius: 16px; padding: 20px 28px; text-align: center; color: #f0f0f4; font-family: 'Inter', system-ui, sans-serif; }
  .celebration-message { margin: 0 0 12px 0; font-size: 16px; font-weight: 600; }
  .share-prompt-btn { background: linear-gradient(135deg, #6366f1, #8b5cf6); border: none; border-radius: 10px; color: white; cursor: pointer; font-size: 14px; font-weight: 500; padding: 10px 24px; transition: opacity 0.2s; }
  .share-prompt-btn:hover { opacity: 0.85; }
  .quick-suggestions { position: fixed; bottom: 120px; left: 50%; transform: translateX(-50%); pointer-events: auto; display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; max-width: 480px; }
  .suggestions-label { width: 100%; text-align: center; color: rgba(255,255,255,0.5); font-family: 'Inter', system-ui, sans-serif; font-size: 12px; margin: 0 0 4px 0; }
  .suggestion-chip { background: rgba(255,255,255,0.06); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.08); border-radius: 20px; color: rgba(255,255,255,0.75); cursor: pointer; font-family: 'Inter', system-ui, sans-serif; font-size: 13px; padding: 7px 16px; transition: background 0.2s, border-color 0.2s; }
  .suggestion-chip:hover { background: rgba(255,255,255,0.12); border-color: rgba(255,255,255,0.18); }
</style>

<script>
(function() {
  var overlay = document.getElementById('onboarding-tips');
  if (!overlay) return;
  var tips = overlay.querySelectorAll('.onboarding-tip');
  var dismissed = JSON.parse(localStorage.getItem('canvas_tips_dismissed') || '[]');
  function showTip(stage) {
    tips.forEach(function(tip) {
      var tipStage = tip.getAttribute('data-stage');
      if (tipStage === stage && dismissed.indexOf(tipStage) === -1) {
        tip.classList.add('visible', 'pulse');
        tip.addEventListener('animationend', function() { tip.classList.remove('pulse'); }, { once: true });
      } else { tip.classList.remove('visible'); }
    });
  }
  tips.forEach(function(tip) {
    var btn = tip.querySelector('.tip-dismiss');
    if (btn) {
      btn.addEventListener('click', function() {
        var stage = tip.getAttribute('data-stage');
        tip.classList.remove('visible');
        dismissed.push(stage);
        localStorage.setItem('canvas_tips_dismissed', JSON.stringify(dismissed));
      });
    }
  });
  window.canvasOnboardingShowTip = showTip;
})();
</script>
